<Controls:MetroWindow x:Class="Metro.Dialogs.SelectItemDialogView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:System="clr-namespace:System;assembly=mscorlib"
        xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
                      xmlns:cal="http://www.caliburnproject.org" Height="411" Width="354" ShowTitleBar="False">
    <Control.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colours.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <BooleanToVisibilityConverter x:Key="boolToVisConv"/>
            <SolidColorBrush x:Key="AccentColorBrush" Color="{DynamicResource AccentColor}"/>
            <SolidColorBrush x:Key="NotSelectedColorBrush" Color="{DynamicResource Gray13}" />
            <SolidColorBrush x:Key="SelectedColorBrush" Color="{DynamicResource Gray11}" />
            <SolidColorBrush x:Key="SelectedForegroundBrush" Color="{DynamicResource BlackColor}" />
            <SolidColorBrush x:Key="MouseOverColorBrush" Color="{DynamicResource AccentColor}" />
            <SolidColorBrush x:Key="SelectedLine" Color="{DynamicResource AccentColor}" />
            <System:Double x:Key="ItemHeight">60</System:Double>
            <ControlTemplate x:Key="listBoxTemaplte" TargetType="ListBoxItem">
                <DockPanel Height="{StaticResource ItemHeight}" Margin="0,1,0,0" Background="{StaticResource NotSelectedColorBrush}" x:Name="dockPanel" LastChildFill="True">
                    <Rectangle x:Name="selectedLine" Visibility="Hidden" DockPanel.Dock="Bottom" Height="1" Fill="{StaticResource SelectedLine}"/>
                    <ContentPresenter Margin="10,0,0,0" />
                </DockPanel>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="dockPanel" Property="Background" Value="{StaticResource MouseOverColorBrush}"/>
                        <Setter Property="Foreground" Value="{StaticResource SelectedForegroundBrush}"/>
                    </Trigger>
                    <Trigger Property="IsSelected" Value="true">
                        <Setter TargetName="selectedLine" Property="Visibility" Value="Visible"/>
                        <Setter TargetName="dockPanel" Property="Background" Value="{StaticResource SelectedColorBrush}"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </ResourceDictionary>
    </Control.Resources>
    <Grid Margin="10" >
        <Grid.RowDefinitions>
            <RowDefinition Height="80"/>
            <RowDefinition Height="5*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <StackPanel>
            <DockPanel >
                <Path Width="32" Height="32" Canvas.Left="15.8333" Canvas.Top="15.8333" Stretch="Fill" Fill="#FF4EA6EA" Data="F1 M 38,15.8333C 50.2423,15.8333 60.1667,25.7577 60.1667,38C 60.1667,50.2423 50.2423,60.1667 38,60.1667C 25.7577,60.1667 15.8333,50.2423 15.8333,38C 15.8333,25.7577 25.7577,15.8333 38,15.8333 Z M 19.065,36.4167L 25.3651,36.4167C 25.4708,33.796 25.8368,31.3011 26.4182,29.0106C 24.9471,28.4945 23.5896,27.8831 22.3719,27.1913C 20.5281,29.8522 19.3463,33.0068 19.065,36.4167 Z M 30.0541,20.7363C 27.8969,21.7308 25.9579,23.1177 24.3286,24.8056C 25.236,25.2756 26.2395,25.6989 27.3232,26.0677C 28.064,24.0419 28.9879,22.241 30.0541,20.7363 Z M 36.4167,36.4167L 36.4167,30.8432C 33.9463,30.7436 31.5878,30.4126 29.4069,29.8881C 28.9321,31.8962 28.6282,34.0974 28.5325,36.4167L 36.4167,36.4167 Z M 36.4167,19.2627C 33.9024,20.1063 31.7231,22.9251 30.2911,26.8939C 32.1894,27.3157 34.2515,27.5865 36.4167,27.6758L 36.4167,19.2627 Z M 56.9349,36.4167C 56.6536,33.0068 55.4719,29.8523 53.6281,27.1913C 52.4104,27.8831 51.0528,28.4946 49.5818,29.0107C 50.1631,31.3011 50.5291,33.796 50.6348,36.4167L 56.9349,36.4167 Z M 45.9459,20.7363C 47.012,22.241 47.9359,24.042 48.6767,26.0677C 49.7605,25.6989 50.7639,25.2756 51.6714,24.8056C 50.0421,23.1177 48.1031,21.7308 45.9459,20.7363 Z M 39.5833,36.4167L 47.4674,36.4167C 47.3718,34.0974 47.0678,31.8962 46.5931,29.8881C 44.4122,30.4126 42.0536,30.7436 39.5833,30.8432L 39.5833,36.4167 Z M 39.5833,19.2627L 39.5833,27.6758C 41.7484,27.5865 43.8106,27.3157 45.7088,26.8939C 44.2769,22.9251 42.0975,20.1064 39.5833,19.2627 Z M 56.9349,39.5834L 50.6348,39.5834C 50.5291,42.204 50.1631,44.6989 49.5818,46.9894C 51.0528,47.5055 52.4104,48.1169 53.6281,48.8087C 55.4719,46.1478 56.6536,42.9932 56.9349,39.5834 Z M 45.9459,55.2638C 48.1031,54.2692 50.0421,52.8823 51.6714,51.1944C 50.764,50.7244 49.7605,50.3011 48.6767,49.9323C 47.9359,51.9581 47.012,53.7591 45.9459,55.2638 Z M 39.5833,39.5834L 39.5833,45.1568C 42.0536,45.2564 44.4122,45.5874 46.5931,46.1119C 47.0678,44.1038 47.3718,41.9027 47.4675,39.5834L 39.5833,39.5834 Z M 39.5833,56.7373C 42.0975,55.8937 44.2769,53.075 45.7089,49.1061C 43.8106,48.6843 41.7484,48.4135 39.5833,48.3242L 39.5833,56.7373 Z M 19.065,39.5834C 19.3463,42.9932 20.5281,46.1478 22.3719,48.8087C 23.5896,48.1169 24.9471,47.5055 26.4182,46.9894C 25.8368,44.6989 25.4708,42.204 25.3651,39.5834L 19.065,39.5834 Z M 30.0541,55.2638C 28.988,53.7591 28.0641,51.9581 27.3232,49.9323C 26.2395,50.3011 25.236,50.7244 24.3286,51.1945C 25.9579,52.8823 27.8969,54.2693 30.0541,55.2638 Z M 36.4167,39.5834L 28.5325,39.5834C 28.6282,41.9027 28.9321,44.1039 29.4069,46.1119C 31.5878,45.5874 33.9463,45.2564 36.4167,45.1568L 36.4167,39.5834 Z M 36.4167,56.7373L 36.4167,48.3242C 34.2515,48.4135 32.1893,48.6843 30.2911,49.1061C 31.7231,53.075 33.9024,55.8937 36.4167,56.7373 Z " Margin="5"/>


                <TextBlock x:Name="Message"  DockPanel.Dock="Left" Text="Select items:" FontFamily="{DynamicResource HeaderFontFamily}" FontSize="{DynamicResource SubHeaderFontSize}"/>
            </DockPanel>
            <TextBox x:Name="FilterText" Visibility="{Binding FilterVisible,Converter={StaticResource boolToVisConv}}"
            FontSize="{DynamicResource NormalFontSize}"
            Controls:TextboxHelper.Watermark="{Binding FilterLabel}"
            Controls:TextboxHelper.ClearTextButton="True" VerticalAlignment="Center"  Margin="0,5,2,15" 
            
            />
        </StackPanel>

        

        <ListBox x:Name="Items"  Grid.Column="0" SelectedValue="{Binding SelectedItem}"  SelectionMode="Single" Grid.Row="1" >
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
                    <Setter Property="Template" Value="{StaticResource listBoxTemaplte}"/>
                    <Setter Property="cal:Message.Attach" 
                            Value="[Event MouseDoubleClick] = [Action DoubleClick($dataContext)]"/>
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel >
                        <TextBlock FontFamily="{DynamicResource HeaderFontFamily}" FontSize="{DynamicResource SubHeaderFontSize}"  Text="{Binding DisplayName}"/>
                        <TextBlock FontFamily="{DynamicResource ContentFontFamily}" FontSize="{DynamicResource NormalFontSize}" Text="{Binding Description}" TextWrapping="WrapWithOverflow" Margin="10,0,0,0"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <StackPanel Orientation="Horizontal" FlowDirection="RightToLeft" Grid.Row="2" Margin="0,10,0,0">
            <Button x:Name="Select" Content="{Binding SelectButtonText}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="121" IsDefault="True" Margin="10,0"/>
            <Button x:Name="Cancel" Content="{Binding CancelButtonText}"  HorizontalAlignment="Left" VerticalAlignment="Top" Width="121" IsCancel="True" Margin="10,0"/>
        </StackPanel>
    </Grid>
</Controls:MetroWindow>
